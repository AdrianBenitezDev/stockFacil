<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kiosco Stock - Panel</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="top-banner">
    <div class="top-banner-inner">
      <div>
        <strong class="top-banner-title">ğŸ§¾ kioscoStock.com.ar</strong>
        <span class="top-banner-subtitle">ğŸ“¡ Panel operativo en linea</span>
      </div>
      <div class="top-banner-controls">
        <button id="ui-mode-toggle" class="top-banner-mode-toggle" type="button">ğŸ’» Modo: PC</button>
        <button id="logout-btn" class="top-banner-logout" type="button">ğŸšª Cerrar sesion</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="app-view">
      <header class="app-header">
        <div>
          <h2>ğŸ“Œ Panel principal</h2>
          <p id="session-info" class="subtitle"></p>
        </div>
      </header>

      <nav class="top-actions top-actions-4">
        <button id="mode-add-product" class="mode-btn mode-btn-secondary is-active" type="button">â• AGREGAR NUEVO PRODUCTO</button>
        <button id="mode-sell" class="mode-btn mode-btn-secondary" type="button">ğŸ›’ VENTA</button>
        <button id="mode-stock" class="mode-btn mode-btn-secondary" type="button">ğŸ“¦ STOCK</button>
        <button id="mode-cash" class="mode-btn mode-btn-secondary" type="button">ğŸ’µ CAJA</button>
      </nav>

      <section id="add-product-panel" class="panel">
        <h3>ğŸ§· Alta de producto</h3>
        <form id="add-product-form" autocomplete="off">
          <label for="barcode">Codigo de barras</label>
          <input id="barcode" name="barcode" type="text" required>
          <div id="add-camera-controls" class="scan-actions">
            <button id="start-add-scan-btn" type="button">ğŸ“· Escanear codigo</button>
            <button id="stop-add-scan-btn" type="button" class="mode-btn-secondary">â¹ï¸ Detener camara</button>
          </div>
          <p id="add-scan-feedback" class="feedback" aria-live="polite"></p>
          <div id="add-scanner-reader" class="scanner-box hidden"></div>

          <label for="product-name">Nombre</label>
          <input id="product-name" name="name" type="text" required>

          <label for="product-category">Categoria</label>
          <select id="product-category" name="category" required>
            <option value="">Selecciona una categoria</option>
          </select>

          <label for="product-price">Precio</label>
          <input id="product-price" name="price" type="number" min="0" step="0.01" required>

          <div id="provider-cost-group" class="hidden">
            <label for="provider-cost">Valor proveedor</label>
            <input id="provider-cost" name="providerCost" type="number" min="0" step="0.01">
          </div>

          <label for="product-stock">Stock inicial</label>
          <input id="product-stock" name="stock" type="number" min="0" step="1" required>

          <button type="submit">ğŸ’¾ Guardar producto</button>
        </form>
        <p id="product-feedback" class="feedback" aria-live="polite"></p>
      </section>

      <section id="sell-panel" class="panel hidden">
        <h3>ğŸ›ï¸ Venta</h3>
        <p id="sale-device-hint" class="subtitle hidden">Escanea con lector USB apuntando a esta pantalla.</p>
        <div class="scan-actions sell-action-bar">
          <button id="start-scan-btn" type="button">ğŸ“· Iniciar camara</button>
          <button id="stop-scan-btn" type="button" class="mode-btn-secondary">â¹ï¸ Detener camara</button>
          <button id="clear-sale-btn" type="button" class="mode-btn-secondary">ğŸ§¹ Limpiar venta</button>
          <button id="checkout-sale-btn" type="button">ğŸ’³ COBRAR</button>
        </div>
        <p id="scan-feedback" class="feedback" aria-live="polite"></p>
        <div id="scanner-reader" class="scanner-box"></div>

        <h4>ğŸ§¾ Venta actual</h4>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Codigo</th>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Subtotal</th>
              </tr>
            </thead>
            <tbody id="sale-table-body">
              <tr>
                <td colspan="5">No hay productos escaneados.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="sale-total-line">Total: <strong id="sale-total">$0.00</strong></p>
      </section>

      <section id="stock-panel" class="panel hidden">
        <h3>ğŸ“¦ Stock</h3>
        <div class="stock-filters">
          <input id="stock-search-input" type="text" placeholder="Buscar por codigo o nombre">
          <select id="stock-category-filter">
            <option value="">Todas las categorias</option>
          </select>
        </div>
        <div id="stock-camera-controls" class="scan-actions">
          <button id="start-stock-scan-btn" type="button">ğŸ“· Escanear para buscar</button>
          <button id="stop-stock-scan-btn" type="button" class="mode-btn-secondary">â¹ï¸ Detener camara</button>
        </div>
        <p id="stock-feedback" class="feedback" aria-live="polite"></p>
        <div id="stock-scanner-reader" class="scanner-box hidden"></div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Editar stock</th>
              </tr>
            </thead>
            <tbody id="stock-table-body">
              <tr>
                <td colspan="4">Sin productos cargados.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <aside id="stock-detail-panel" class="stock-detail-panel hidden">
          <h4>ğŸ” Detalle de producto</h4>
          <p><strong>Nombre:</strong> <span id="stock-detail-name">-</span></p>
          <p><strong>Codigo:</strong> <span id="stock-detail-barcode">-</span></p>
          <p><strong>Categoria:</strong> <span id="stock-detail-category">-</span></p>
          <p><strong>Precio:</strong> <span id="stock-detail-price">-</span></p>
          <p><strong>Stock:</strong> <span id="stock-detail-stock">-</span></p>
        </aside>
      </section>

      <section id="cash-panel" class="panel hidden">
        <h3>ğŸ’µ Caja</h3>
        <p id="cash-scope-label" class="subtitle"></p>
        <div class="cash-summary">
          <article class="cash-card">
            <h4>Ventas del dia</h4>
            <p id="cash-sales-count" class="cash-value">0</p>
          </article>
          <article class="cash-card">
            <h4>Productos vendidos</h4>
            <p id="cash-items-count" class="cash-value">0</p>
          </article>
          <article class="cash-card">
            <h4>Total a entregar</h4>
            <p id="cash-total-amount" class="cash-value">$0.00</p>
          </article>
          <article class="cash-card">
            <h4>Costo del dia</h4>
            <p id="cash-total-cost" class="cash-value">$0.00</p>
          </article>
          <article class="cash-card">
            <h4>Ganancia del dia</h4>
            <p id="cash-profit-amount" class="cash-value">$0.00</p>
          </article>
        </div>

        <p id="cash-closure-status" class="subtitle"></p>

        <div class="scan-actions">
          <button id="close-shift-btn" type="button">ğŸ§® TERMINAR TURNO</button>
          <button id="refresh-cash-btn" type="button" class="mode-btn-secondary">ğŸ”„ Actualizar caja</button>
        </div>
        <p id="cash-feedback" class="feedback" aria-live="polite"></p>

        <h4>ğŸ“Š Ventas del dia</h4>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Hora</th>
                <th>Usuario</th>
                <th>Items</th>
                <th>Total</th>
                <th>Ganancia</th>
              </tr>
            </thead>
            <tbody id="cash-sales-table-body">
              <tr>
                <td colspan="5">No hay ventas registradas hoy.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h4>ğŸ—‚ï¸ Historial de cierres</h4>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Usuario</th>
                <th>Ventas</th>
                <th>Total</th>
                <th>Ganancia</th>
              </tr>
            </thead>
            <tbody id="cash-closures-table-body">
              <tr>
                <td colspan="5">No hay cierres registrados.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <div class="site-footer-inner">
      <span>ğŸ‘¨â€ğŸ’» Developer: Adrian Benitez Dev</span>
      <span>ğŸš§ web actualmente en construccion desde el 10/2/26</span>
    </div>
  </footer>

  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <script type="module" src="js/panel.js"></script>
</body>
</html>
